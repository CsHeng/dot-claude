#!/usr/bin/env python3
"""
Deprecated wrapper for llm_spec_validator.py.

This file exists to keep older tooling and backups working.
New code should import and invoke LLMSpecValidator from llm_spec_validator.py.
"""

from pathlib import Path
from typing import Dict, List
import sys

from llm_spec_validator import LLMSpecValidator, ValidationError  # type: ignore


def main():
    if len(sys.argv) != 2:
        print("Usage: python3 llm_spec_validator.py <directory>")
        sys.exit(1)

    directory = Path(sys.argv[1])
    if not directory.exists():
        print(f"Error: Directory {directory} does not exist")
        sys.exit(1)

    validator = LLMSpecValidator()
    results: Dict[str, List[ValidationError]] = validator.validate_directory(directory)

    if not results:
        print("âœ“ All files passed validation!")
        sys.exit(0)

    critical_count = 0
    warning_count = 0

    for file_path, errors in results.items():
        print(f"\nðŸ“ {file_path}")
        for error in errors:
            print(f"  {error}")
            if error.severity == 'critical':
                critical_count += 1
            elif error.severity == 'warning':
                warning_count += 1

    print(f"\nðŸ“Š Summary:")
    print(f"  Critical errors: {critical_count}")
    print(f"  Warnings: {warning_count}")
    print(f"  Files with issues: {len(results)}")

    if critical_count > 0:
        sys.exit(1)
    else:
        sys.exit(0)


if __name__ == "__main__":
    main()

